<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Extract posterior draws — fit-method-draws • cmdstanr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Extract posterior draws — fit-method-draws" />
<meta property="og:description" content="Extract posterior draws after MCMC or approximate posterior
draws after variational approximation using formats provided by the
posterior package.
The variables include the parameters, transformed parameters, and
generated quantities from the Stan program as well as lp__, the total
log probability (target) accumulated in the model block." />
<meta property="og:image" content="https://mc-stan.org/cmdstanr/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cmdstanr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
    <li>
      <a href="https://mc-stan.org/posterior">posterior</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/cmdstanr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract posterior draws</h1>
    <small class="dont-index">Source: <a href='https://github.com/stan-dev/cmdstanr/blob/master/R/fit.R'><code>R/fit.R</code></a></small>
    <div class="hidden name"><code>fit-method-draws.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract posterior draws after MCMC or approximate posterior
draws after variational approximation using formats provided by the
<span class="pkg">posterior</span> package.</p>
<p>The variables include the <code>parameters</code>, <code>transformed parameters</code>, and
<code>generated quantities</code> from the Stan program as well as <code>lp__</code>, the total
log probability (<code>target</code>) accumulated in the <code>model</code> block.</p>
    </div>



    <h2 class="hasAnchor" id="usage"><a class="anchor" href="#usage"></a>Usage</h2>

    
<pre>$draws(variables = NULL, inc_warmup = FALSE, ...)
</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>

    

<ul>
<li><p><code>variables</code>: (character vector) The variables (parameters and generated
quantities) to read in. If <code>NULL</code> (the default) then the draws of all
variables are included.</p></li>
<li><p><code>inc_warmup</code>: (logical) For MCMC only, should warmup draws be included?
Defaults to <code>FALSE</code>.</p></li>
<li><p><code>...</code>: Arguments passed on to
<code><a href='https://mc-stan.org/posterior/reference/draws_array.html'>posterior::as_draws_array()</a></code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    

<ul>
<li><p>For <a href='model-method-sample.html'>MCMC</a>, a 3-D
<code><a href='https://mc-stan.org/posterior/reference/draws_array.html'>draws_array</a></code> object (iteration x chain x
variable).</p></li>
<li><p>For <a href='model-method-generate-quantities.html'>standalone generated quantities</a>, a
3-D <code><a href='https://mc-stan.org/posterior/reference/draws_array.html'>draws_array</a></code> object (iteration x chain x
variable).</p></li>
<li><p>For <a href='model-method-variational.html'>variational inference</a>, a 2-D
<code><a href='https://mc-stan.org/posterior/reference/draws_matrix.html'>draws_matrix</a></code> object (draw x variable). An
additional variable <code>lp_approx__</code> is also included, which is the log density
of the variational approximation to the posterior evaluated at each of the
draws.</p></li>
<li><p>For <a href='model-method-optimize.html'>optimization</a>, a 1-row
<code><a href='https://mc-stan.org/posterior/reference/draws_matrix.html'>draws_matrix</a></code> with one column per variable. These
are <em>not</em> actually draws, just point estimates stored in the <code>draws_matrix</code>
format.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \dontrun{</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>posterior</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>bayesplot</span>)
<span class='fu'><a href='https://mc-stan.org/bayesplot/reference/bayesplot-colors.html'>color_scheme_set</a></span>(<span class='st'>"brightblue"</span>)

<span class='co'># logistic regression with intercept alpha and coefficients beta</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='cmdstanr_example.html'>cmdstanr_example</a></span>(<span class='st'>"logistic"</span>)</div><div class='output co'>#&gt; <span class='message'>Model executable is up to date!</span></div><div class='input'>
<span class='co'># returned as 3-D array (see ?posterior::draws_array)</span>
<span class='no'>draws</span> <span class='kw'>&lt;-</span> <span class='no'>fit</span>$<span class='fu'>draws</span>()
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span>(<span class='no'>draws</span>)</div><div class='output co'>#&gt; [1] 1000    4    5</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>draws</span>)</div><div class='output co'>#&gt;  'draws_array' num [1:1000, 1:4, 1:5] -65 -65.1 -65.3 -65.4 -68.7 ...
#&gt;  - attr(*, "dimnames")=List of 3
#&gt;   ..$ iteration: chr [1:1000] "1" "2" "3" "4" ...
#&gt;   ..$ chain    : chr [1:4] "1" "2" "3" "4"
#&gt;   ..$ variable : chr [1:5] "lp__" "alpha" "beta[1]" "beta[2]" ...</div><div class='input'>
<span class='co'># can easily convert to other formats (data frame, matrix, list)</span>
<span class='fu'><a href='https://mc-stan.org/posterior/reference/draws_df.html'>as_draws_df</a></span>(<span class='no'>draws</span>)  <span class='co'># see also as_draws_matrix, as_draws_list</span></div><div class='output co'>#&gt; # A draws_df: 1000 iterations, 4 chains, and 5 variables
#&gt;    lp__ alpha beta[1] beta[2] beta[3]
#&gt; 1   -65 0.616   -0.66 -0.3815  0.5227
#&gt; 2   -65 0.532   -0.61 -0.3777  0.3704
#&gt; 3   -65 0.666   -0.52 -0.1367  0.5360
#&gt; 4   -65 0.418   -0.42  0.0059  0.7303
#&gt; 5   -69 0.084   -0.37 -0.2434 -0.0093
#&gt; 6   -64 0.284   -0.53 -0.1376  0.5247
#&gt; 7   -68 0.740   -0.24 -0.0275  0.9066
#&gt; 8   -66 0.749   -0.46 -0.0666  0.5645
#&gt; 9   -66 0.559   -1.05 -0.4111  0.8094
#&gt; 10  -65 0.189   -0.94 -0.3172  0.7602
#&gt; # ... with 3990 more draws
#&gt; # ... hidden meta-columns {'.chain', '.iteration', '.draw'}</div><div class='input'>
<span class='co'># can select specific parameters</span>
<span class='no'>fit</span>$<span class='fu'>draws</span>(<span class='st'>"alpha"</span>)</div><div class='output co'>#&gt; # A draws_array: 1000 iterations, 4 chains, and 1 variables
#&gt; , , variable = alpha
#&gt; 
#&gt;          chain
#&gt; iteration     1    2    3      4
#&gt;         1 0.616 0.59 0.67 -0.037
#&gt;         2 0.532 0.51 0.60  0.517
#&gt;         3 0.666 0.43 0.66  0.387
#&gt;         4 0.418 0.57 0.83  0.645
#&gt;         5 0.084 0.58 0.37  0.420
#&gt; 
#&gt; # ... with 995 more iterations</div><div class='input'><span class='no'>fit</span>$<span class='fu'>draws</span>(<span class='st'>"beta"</span>)  <span class='co'># selects entire vector beta</span></div><div class='output co'>#&gt; # A draws_array: 1000 iterations, 4 chains, and 3 variables
#&gt; , , variable = beta[1]
#&gt; 
#&gt;          chain
#&gt; iteration     1     2     3     4
#&gt;         1 -0.66 -0.92 -0.26 -0.71
#&gt;         2 -0.61 -0.91 -0.62 -0.58
#&gt;         3 -0.52 -0.85 -0.59 -0.80
#&gt;         4 -0.42 -0.55 -0.35 -0.44
#&gt;         5 -0.37 -0.73 -0.67 -0.66
#&gt; 
#&gt; , , variable = beta[2]
#&gt; 
#&gt;          chain
#&gt; iteration       1      2      3     4
#&gt;         1 -0.3815 -0.724 -0.124 -0.13
#&gt;         2 -0.3777 -0.339  0.026 -0.56
#&gt;         3 -0.1367 -0.600  0.035 -0.26
#&gt;         4  0.0059  0.064  0.074 -0.40
#&gt;         5 -0.2434  0.053 -0.578 -0.32
#&gt; 
#&gt; , , variable = beta[3]
#&gt; 
#&gt;          chain
#&gt; iteration       1    2    3    4
#&gt;         1  0.5227 0.70 0.67 1.17
#&gt;         2  0.3704 0.84 0.66 0.38
#&gt;         3  0.5360 0.94 0.58 0.68
#&gt;         4  0.7303 0.54 0.11 0.72
#&gt;         5 -0.0093 1.09 0.52 0.75
#&gt; 
#&gt; # ... with 995 more iterations</div><div class='input'><span class='no'>fit</span>$<span class='fu'>draws</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"alpha"</span>, <span class='st'>"beta[2]"</span>))</div><div class='output co'>#&gt; # A draws_array: 1000 iterations, 4 chains, and 2 variables
#&gt; , , variable = alpha
#&gt; 
#&gt;          chain
#&gt; iteration     1    2    3      4
#&gt;         1 0.616 0.59 0.67 -0.037
#&gt;         2 0.532 0.51 0.60  0.517
#&gt;         3 0.666 0.43 0.66  0.387
#&gt;         4 0.418 0.57 0.83  0.645
#&gt;         5 0.084 0.58 0.37  0.420
#&gt; 
#&gt; , , variable = beta[2]
#&gt; 
#&gt;          chain
#&gt; iteration       1      2      3     4
#&gt;         1 -0.3815 -0.724 -0.124 -0.13
#&gt;         2 -0.3777 -0.339  0.026 -0.56
#&gt;         3 -0.1367 -0.600  0.035 -0.26
#&gt;         4  0.0059  0.064  0.074 -0.40
#&gt;         5 -0.2434  0.053 -0.578 -0.32
#&gt; 
#&gt; # ... with 995 more iterations</div><div class='input'>
<span class='co'># can be passed directly to bayesplot plotting functions</span>
<span class='fu'><a href='https://mc-stan.org/bayesplot/reference/MCMC-distributions.html'>mcmc_dens</a></span>(<span class='no'>fit</span>$<span class='fu'>draws</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"alpha"</span>, <span class='st'>"beta"</span>)))</div><div class='img'><img src='fit-method-draws-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://mc-stan.org/bayesplot/reference/MCMC-scatterplots.html'>mcmc_scatter</a></span>(<span class='no'>fit</span>$<span class='fu'>draws</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"beta[1]"</span>, <span class='st'>"beta[2]"</span>)), <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.3</span>)</div><div class='img'><img src='fit-method-draws-2.png' alt='' width='700' height='433' /></div><div class='input'># }

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jonah Gabry, Rok Češnovar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


