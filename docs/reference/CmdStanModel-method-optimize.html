<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Run Stan's optimization algorithms — CmdStanModel-method-optimize • cmdstanr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Run Stan's optimization algorithms — CmdStanModel-method-optimize" />
<meta property="og:description" content="The optimize method of a CmdStanModel object runs Stan's
optimizer. Arguments left at NULL default to the current CmdStan default." />
<meta property="og:image" content="https://mc-stan.org/cmdstanr/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cmdstanr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/cmdstanr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run Stan's optimization algorithms</h1>
    
    <div class="hidden name"><code>CmdStanModel-method-optimize.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>optimize</code> method of a <code><a href='CmdStanModel.html'>CmdStanModel</a></code> object runs Stan's
optimizer. Arguments left at <code>NULL</code> default to the current CmdStan default.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>CmdStan can find the posterior mode (assuming there is one). If the
posterior is not convex, there is no guarantee Stan will be able to find
the global mode as opposed to a local optimum of log probability. For
optimization, the mode is calculated without the Jacobian adjustment for
con- strained variables, which shifts the mode due to the change of
variables. Thus modes correspond to modes of the model as written.</p>
<p>-- <a href='https://github.com/stan-dev/cmdstan/releases/latest'>CmdStan Interface User's Guide</a></p>
    <h2 class="hasAnchor" id="usage"><a class="anchor" href="#usage"></a>Usage</h2>

    
<pre>$optimize(
  data = NULL,
  seed = NULL,
  refresh = NULL,
  init = NULL,
  algorithm = NULL,
  init_alpha = NULL,
  iter = NULL
)
</pre>

    <h2 class="hasAnchor" id="arguments-shared-by-all-fitting-methods"><a class="anchor" href="#arguments-shared-by-all-fitting-methods"></a>Arguments shared by all fitting methods</h2>

    <p>The following arguments can
be specified for any of the fitting methods (<code>sample</code>, <code>optimize</code>,
<code>variational</code>):</p><ul>
<li><p><code>data</code> (multiple options): The data to use:</p><ul>
<li><p>A named list of <span style="R">R</span> objects like for RStan;</p></li>
<li><p>A path to a data file compatible with CmdStan.</p></li>
</ul></li>
<li><p><code>seed</code>: (positive integer) A seed for the (P)RNG to pass to CmdStan.</p></li>
<li><p><code>refresh</code>: (non-negative integer) The number of iterations between
screen updates.</p></li>
<li><p><code>init</code>: (multiple options) The initialization method:</p><ul>
<li><p>A real number <code>x&gt;0</code> initializes randomly between <code>[-x,x]</code> (on the
<em>unconstrained</em> parameter space);</p></li>
<li><p><code>0</code> initializes to <code>0</code>;</p></li>
<li><p>A character vector of data file paths (one per chain) to
initialization files.</p></li>
</ul></li>
</ul>

    <h2 class="hasAnchor" id="arguments-unique-to-the-optimize-method"><a class="anchor" href="#arguments-unique-to-the-optimize-method"></a>Arguments unique to the <code>optimize</code> method</h2>

    <p>In addition to the
arguments above, the <code>optimize</code> method also has the following arguments:</p><ul>
<li><p><code>algorithm</code>: (string) The optimization algorithm. One of
<code>"lbfgs"</code>, <code>"bfgs"</code>, or <code>"newton"</code>.</p></li>
<li><p><code>iter</code>: (positive integer) The number of iterations.</p></li>
<li><p><code>init_alpha</code>: (non-negative real) The line search step size for first
iteration. Not applicable if <code>algorithm="newton"</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The <code>optimize</code> method returns a <code><a href='CmdStanMLE.html'>CmdStanMLE</a></code> object.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='CmdStanModel.html'>CmdStanModel</a></code></p>
<p>Other CmdStanModel methods: <code><a href='CmdStanModel-method-compile.html'>CmdStanModel-method-compile</a></code>,
  <code><a href='CmdStanModel-method-sample.html'>CmdStanModel-method-sample</a></code>,
  <code><a href='CmdStanModel-method-variational.html'>CmdStanModel-method-variational</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \dontrun{</span>
<span class='co'># Set path to cmdstan</span>
<span class='co'># Note: if you installed CmdStan via install_cmdstan() with default settings</span>
<span class='co'># then default below should work. Otherwise use the `path` argument to</span>
<span class='co'># specify the location of your CmdStan installation.</span>

<span class='fu'><a href='cmdstan_path.html'>set_cmdstan_path</a></span>(<span class='kw'>path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</div><div class='output co'>#&gt; <span class='message'>CmdStan path set to: /Users/jgabry/.cmdstanr/cmdstan-2.20.0</span></div><div class='input'>
<span class='co'># Create a CmdStan model object from a Stan program,</span>
<span class='co'># here using the example model that comes with CmdStan</span>
<span class='no'>stan_program</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='fu'><a href='cmdstan_path.html'>cmdstan_path</a></span>(), <span class='st'>"examples/bernoulli/bernoulli.stan"</span>)
<span class='no'>mod</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='cmdstan_model.html'>cmdstan_model</a></span>(<span class='no'>stan_program</span>)
<span class='no'>mod</span>$<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>()</div><div class='output co'>#&gt; data { 
#&gt;   int&lt;lower=0&gt; N; 
#&gt;   int&lt;lower=0,upper=1&gt; y[N];
#&gt; } 
#&gt; parameters {
#&gt;   real&lt;lower=0,upper=1&gt; theta;
#&gt; } 
#&gt; model {
#&gt;   theta ~ beta(1,1);
#&gt;   for (n in 1:N) 
#&gt;     y[n] ~ bernoulli(theta);
#&gt; }</div><div class='input'>
<span class='co'># Compile to create executable</span>
<span class='no'>mod</span>$<span class='fu'>compile</span>()</div><div class='output co'>#&gt; Running make \
#&gt;   /Users/jgabry/.cmdstanr/cmdstan-2.20.0/examples/bernoulli/bernoulli
#&gt; make: `/Users/jgabry/.cmdstanr/cmdstan-2.20.0/examples/bernoulli/bernoulli' is up to date.</div><div class='input'>
<span class='co'># Run MCMC (Stan's dynamic HMC/NUTS),</span>
<span class='co'># specifying data as a named list (like RStan)</span>
<span class='no'>standata</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>y</span> <span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>))
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='no'>mod</span>$<span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>standata</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>123</span>, <span class='kw'>num_chains</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt; Running ./bernoulli 'id=1' random 'seed=123' data \
#&gt;   'file=/var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/standata-12234a97a8f7.data.R' \
#&gt;   output \
#&gt;   'file=/var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-1.csv' \
#&gt;   'method=sample' 'save_warmup=0' 'algorithm=hmc' 'engine=nuts'
#&gt; method = sample (Default)
#&gt;   sample
#&gt;     num_samples = 1000 (Default)
#&gt;     num_warmup = 1000 (Default)
#&gt;     save_warmup = 0 (Default)
#&gt;     thin = 1 (Default)
#&gt;     adapt
#&gt;       engaged = 1 (Default)
#&gt;       gamma = 0.050000000000000003 (Default)
#&gt;       delta = 0.80000000000000004 (Default)
#&gt;       kappa = 0.75 (Default)
#&gt;       t0 = 10 (Default)
#&gt;       init_buffer = 75 (Default)
#&gt;       term_buffer = 50 (Default)
#&gt;       window = 25 (Default)
#&gt;     algorithm = hmc (Default)
#&gt;       hmc
#&gt;         engine = nuts (Default)
#&gt;           nuts
#&gt;             max_depth = 10 (Default)
#&gt;         metric = diag_e (Default)
#&gt;         metric_file =  (Default)
#&gt;         stepsize = 1 (Default)
#&gt;         stepsize_jitter = 0 (Default)
#&gt; id = 1
#&gt; data
#&gt;   file = /var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/standata-12234a97a8f7.data.R
#&gt; init = 2 (Default)
#&gt; random
#&gt;   seed = 123
#&gt; output
#&gt;   file = /var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-1.csv
#&gt;   diagnostic_file =  (Default)
#&gt;   refresh = 100 (Default)
#&gt; 
#&gt; 
#&gt; Gradient evaluation took 1.8e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.18 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Iteration:  100 / 2000 [  5%]  (Warmup)
#&gt; Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Iteration:  300 / 2000 [ 15%]  (Warmup)
#&gt; Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Iteration:  500 / 2000 [ 25%]  (Warmup)
#&gt; Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Iteration:  700 / 2000 [ 35%]  (Warmup)
#&gt; Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Iteration:  900 / 2000 [ 45%]  (Warmup)
#&gt; Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Iteration: 1100 / 2000 [ 55%]  (Sampling)
#&gt; Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Iteration: 1300 / 2000 [ 65%]  (Sampling)
#&gt; Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Iteration: 1500 / 2000 [ 75%]  (Sampling)
#&gt; Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Iteration: 1700 / 2000 [ 85%]  (Sampling)
#&gt; Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Iteration: 1900 / 2000 [ 95%]  (Sampling)
#&gt; Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 0.011424 seconds (Warm-up)
#&gt;                0.018282 seconds (Sampling)
#&gt;                0.029706 seconds (Total)
#&gt; 
#&gt; Running ./bernoulli 'id=2' random 'seed=124' data \
#&gt;   'file=/var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/standata-12234a97a8f7.data.R' \
#&gt;   output \
#&gt;   'file=/var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-2.csv' \
#&gt;   'method=sample' 'save_warmup=0' 'algorithm=hmc' 'engine=nuts'
#&gt; method = sample (Default)
#&gt;   sample
#&gt;     num_samples = 1000 (Default)
#&gt;     num_warmup = 1000 (Default)
#&gt;     save_warmup = 0 (Default)
#&gt;     thin = 1 (Default)
#&gt;     adapt
#&gt;       engaged = 1 (Default)
#&gt;       gamma = 0.050000000000000003 (Default)
#&gt;       delta = 0.80000000000000004 (Default)
#&gt;       kappa = 0.75 (Default)
#&gt;       t0 = 10 (Default)
#&gt;       init_buffer = 75 (Default)
#&gt;       term_buffer = 50 (Default)
#&gt;       window = 25 (Default)
#&gt;     algorithm = hmc (Default)
#&gt;       hmc
#&gt;         engine = nuts (Default)
#&gt;           nuts
#&gt;             max_depth = 10 (Default)
#&gt;         metric = diag_e (Default)
#&gt;         metric_file =  (Default)
#&gt;         stepsize = 1 (Default)
#&gt;         stepsize_jitter = 0 (Default)
#&gt; id = 2
#&gt; data
#&gt;   file = /var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/standata-12234a97a8f7.data.R
#&gt; init = 2 (Default)
#&gt; random
#&gt;   seed = 124
#&gt; output
#&gt;   file = /var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-2.csv
#&gt;   diagnostic_file =  (Default)
#&gt;   refresh = 100 (Default)
#&gt; 
#&gt; 
#&gt; Gradient evaluation took 1.8e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.18 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Iteration:  100 / 2000 [  5%]  (Warmup)
#&gt; Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Iteration:  300 / 2000 [ 15%]  (Warmup)
#&gt; Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Iteration:  500 / 2000 [ 25%]  (Warmup)
#&gt; Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Iteration:  700 / 2000 [ 35%]  (Warmup)
#&gt; Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Iteration:  900 / 2000 [ 45%]  (Warmup)
#&gt; Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Iteration: 1100 / 2000 [ 55%]  (Sampling)
#&gt; Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Iteration: 1300 / 2000 [ 65%]  (Sampling)
#&gt; Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Iteration: 1500 / 2000 [ 75%]  (Sampling)
#&gt; Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Iteration: 1700 / 2000 [ 85%]  (Sampling)
#&gt; Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Iteration: 1900 / 2000 [ 95%]  (Sampling)
#&gt; Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 0.011325 seconds (Warm-up)
#&gt;                0.01888 seconds (Sampling)
#&gt;                0.030205 seconds (Total)
#&gt; </div><div class='input'><span class='no'>fit</span>$<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>()</div><div class='output co'>#&gt; Running bin/stansummary \
#&gt;   /var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-1.csv \
#&gt;   /var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-2.csv
#&gt; Inference for Stan model: bernoulli_model
#&gt; 2 chains: each with iter=(1000,1000); warmup=(0,0); thin=(1,1); 2000 iterations saved.
#&gt; 
#&gt; Warmup took (0.011, 0.011) seconds, 0.023 seconds total
#&gt; Sampling took (0.018, 0.019) seconds, 0.037 seconds total
#&gt; 
#&gt;                 Mean     MCSE   StdDev     5%   50%   95%  N_Eff  N_Eff/s    R_hat
#&gt; lp__            -7.3  2.7e-02  7.3e-01   -8.9  -7.0  -6.8    738    19872  1.0e+00
#&gt; accept_stat__   0.92  3.1e-03  1.3e-01   0.64  0.97   1.0   1670    44926  1.0e+00
#&gt; stepsize__      0.92  1.7e-03  1.7e-03   0.92  0.92  0.92    1.0       27  1.4e+12
#&gt; treedepth__      1.3  1.1e-02  4.7e-01    1.0   1.0   2.0   1968    52951  1.0e+00
#&gt; n_leapfrog__     2.4  2.5e-02  1.0e+00    1.0   3.0   3.0   1640    44135  1.0e+00
#&gt; divergent__     0.00  0.0e+00  0.0e+00   0.00  0.00  0.00   1000    26909      nan
#&gt; energy__         7.8  4.0e-02  1.0e+00    6.8   7.5   9.8    647    17404  1.0e+00
#&gt; theta           0.24  4.6e-03  1.2e-01  0.077  0.22  0.47    720    19378  1.0e+00
#&gt; 
#&gt; Samples were drawn using hmc with nuts.
#&gt; For each parameter, N_Eff is a crude measure of effective sample size,
#&gt; and R_hat is the potential scale reduction factor on split chains (at 
#&gt; convergence, R_hat=1).
#&gt; </div><div class='input'>
<span class='co'># Can also specify data as a path to a file readable by CmdStan</span>
<span class='no'>my_data_file</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='fu'><a href='cmdstan_path.html'>cmdstan_path</a></span>(), <span class='st'>"examples/bernoulli/bernoulli.data.R"</span>)
<span class='no'>fit2</span> <span class='kw'>&lt;-</span> <span class='no'>mod</span>$<span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>my_data_file</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>123</span>)</div><div class='output co'>#&gt; Running ./bernoulli 'id=1' random 'seed=123' data \
#&gt;   'file=/Users/jgabry/.cmdstanr/cmdstan-2.20.0/examples/bernoulli/bernoulli.data.R' \
#&gt;   output \
#&gt;   'file=/var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-1.csv' \
#&gt;   'method=sample' 'save_warmup=0' 'algorithm=hmc' 'engine=nuts'
#&gt; method = sample (Default)
#&gt;   sample
#&gt;     num_samples = 1000 (Default)
#&gt;     num_warmup = 1000 (Default)
#&gt;     save_warmup = 0 (Default)
#&gt;     thin = 1 (Default)
#&gt;     adapt
#&gt;       engaged = 1 (Default)
#&gt;       gamma = 0.050000000000000003 (Default)
#&gt;       delta = 0.80000000000000004 (Default)
#&gt;       kappa = 0.75 (Default)
#&gt;       t0 = 10 (Default)
#&gt;       init_buffer = 75 (Default)
#&gt;       term_buffer = 50 (Default)
#&gt;       window = 25 (Default)
#&gt;     algorithm = hmc (Default)
#&gt;       hmc
#&gt;         engine = nuts (Default)
#&gt;           nuts
#&gt;             max_depth = 10 (Default)
#&gt;         metric = diag_e (Default)
#&gt;         metric_file =  (Default)
#&gt;         stepsize = 1 (Default)
#&gt;         stepsize_jitter = 0 (Default)
#&gt; id = 1
#&gt; data
#&gt;   file = /Users/jgabry/.cmdstanr/cmdstan-2.20.0/examples/bernoulli/bernoulli.data.R
#&gt; init = 2 (Default)
#&gt; random
#&gt;   seed = 123
#&gt; output
#&gt;   file = /var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-1.csv
#&gt;   diagnostic_file =  (Default)
#&gt;   refresh = 100 (Default)
#&gt; 
#&gt; 
#&gt; Gradient evaluation took 1.7e-05 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0.17 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Iteration:  100 / 2000 [  5%]  (Warmup)
#&gt; Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Iteration:  300 / 2000 [ 15%]  (Warmup)
#&gt; Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Iteration:  500 / 2000 [ 25%]  (Warmup)
#&gt; Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Iteration:  700 / 2000 [ 35%]  (Warmup)
#&gt; Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Iteration:  900 / 2000 [ 45%]  (Warmup)
#&gt; Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Iteration: 1100 / 2000 [ 55%]  (Sampling)
#&gt; Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Iteration: 1300 / 2000 [ 65%]  (Sampling)
#&gt; Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Iteration: 1500 / 2000 [ 75%]  (Sampling)
#&gt; Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Iteration: 1700 / 2000 [ 85%]  (Sampling)
#&gt; Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Iteration: 1900 / 2000 [ 95%]  (Sampling)
#&gt; Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 0.012021 seconds (Warm-up)
#&gt;                0.018212 seconds (Sampling)
#&gt;                0.030233 seconds (Total)
#&gt; </div><div class='input'><span class='no'>fit2</span>$<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>()</div><div class='output co'>#&gt; Running bin/stansummary \
#&gt;   /var/folders/h6/14xy_35x4wd2tz542dn0qhtc0000gn/T//RtmpPEQLFz/bernoulli-stan-sample-1.csv
#&gt; Inference for Stan model: bernoulli_model
#&gt; 1 chains: each with iter=(1000); warmup=(0); thin=(1); 1000 iterations saved.
#&gt; 
#&gt; Warmup took (0.012) seconds, 0.012 seconds total
#&gt; Sampling took (0.018) seconds, 0.018 seconds total
#&gt; 
#&gt;                 Mean     MCSE   StdDev     5%   50%   95%  N_Eff  N_Eff/s    R_hat
#&gt; lp__            -7.4  3.8e-02  7.8e-01   -9.1  -7.1  -6.8    423    23204  1.0e+00
#&gt; accept_stat__   0.91  5.0e-03  1.4e-01   0.61  0.97   1.0    763    41902  1.0e+00
#&gt; stepsize__      0.92  4.2e-15  4.2e-15   0.92  0.92  0.92    1.0       55  1.0e+00
#&gt; treedepth__      1.3  1.5e-02  4.7e-01    1.0   1.0   2.0    971    53338  1.0e+00
#&gt; n_leapfrog__     2.3  3.2e-02  9.9e-01    1.0   3.0   3.0    943    51756  1.0e+00
#&gt; divergent__     0.00  0.0e+00  0.0e+00   0.00  0.00  0.00    500    27454      nan
#&gt; energy__         7.9  5.7e-02  1.1e+00    6.8   7.6  10.0    356    19572  1.0e+00
#&gt; theta           0.24  6.6e-03  1.2e-01  0.072  0.21  0.46    360    19760  1.0e+00
#&gt; 
#&gt; Samples were drawn using hmc with nuts.
#&gt; For each parameter, N_Eff is a crude measure of effective sample size,
#&gt; and R_hat is the potential scale reduction factor on split chains (at 
#&gt; convergence, R_hat=1).
#&gt; </div><div class='input'>
<span class='co'># If you like working with RStan's stanfit objects then you can</span>
<span class='co'># also create a stanfit object with rstan::read_stan_csv()</span>
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='no'>rstan</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)) {
  <span class='no'>stanfit</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>rstan</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/rstan/man/stan_csv.html'>read_stan_csv</a></span>(<span class='no'>fit</span>$<span class='fu'>output_files</span>())
}

<span class='co'># }</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#details">Details</a></li>
      <li><a href="#usage">Usage</a></li>
      <li><a href="#arguments-shared-by-all-fitting-methods">Arguments shared by all fitting methods</a></li>
      <li><a href="#arguments-unique-to-the-optimize-method">Arguments unique to the <code>optimize</code> method</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jonah Gabry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


